<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music45 - JioSaavn Audio</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #1c1c1c; color: white; padding: 20px; }
        .search-container { margin-bottom: 20px; }
        input { padding: 10px; width: 60%; font-size: 16px; border-radius: 5px; border: 1px solid #444; }
        button { padding: 10px 15px; font-size: 16px; border: none; background: #ff4757; color: white; cursor: pointer; border-radius: 5px; }
        button:hover { background: #e84118; }
        .song-item { display: flex; align-items: center; margin: 10px auto; padding: 10px; background: #333; border-radius: 10px; width: 80%; cursor: pointer; }
        .song-item img { width: 80px; height: 80px; border-radius: 5px; margin-right: 10px; }
        .song-item p { flex-grow: 1; text-align: left; }
        .footer-controls {
            position: fixed;
            bottom: 0;
            width: 70%;
            background: #222;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            color: white;
        }
        .footer-song-info { display: flex; align-items: center; }
        .footer-cover { width: 50px; height: 50px; border-radius: 5px; margin-right: 10px; }
        .footer-controls-buttons button {
            background: none;
            border: none;
            font-size: 20px;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
   <input type="text" id="search-query" placeholder="Enter song name...">
<button>Search</button>
<div id="song-list"></div>

<audio id="music-player" controls></audio>

<div id="footer-controls" class="footer-controls">
  <div id="footer-song-info" class="footer-song-info">
    <img id="footer-cover-image" class="footer-cover" src="" alt="Cover">
    <div>
      <p id="footer-song-title">Select a Song</p>
      <p id="footer-artist-name"></p>
    </div>
  </div>
  <div class="footer-controls-buttons">
    <button id="footer-play-pause" class="footer-play-pause-btn">‚ñ∂Ô∏è</button>
  </div>
</div>



    <script>
const JIOSAAVN_API_BASE = "https://saavn.dev/api";
let currentSongUrl = null;
let isPlaying = false;

// üéµ Search Songs
async function searchSongs() {
    const query = document.getElementById("search-query").value.trim();
    if (!query) return alert("‚ùå Please enter a song name!");

    console.log("üîé Searching for:", query); // Debugging log

    try {
        const response = await fetch(`https://saavn.dev/api/search?query=${encodeURIComponent(query)}`);
        const data = await response.json();

        console.log("‚úÖ API Response:", data); // Check if API is giving data

        if (data.status === "SUCCESS" && data.data && data.data.length > 0) { 
    displaySongs(data.data);
} else {
    alert("‚ùå No results found on JioSaavn!");
}
    } catch (error) {
        console.error("‚ö†Ô∏è Error fetching songs:", error);
        alert("‚ö†Ô∏è API request failed. Check console for errors.");
    }
}


// üéº Display Song List
function displaySongs(songs) {
    const songList = document.getElementById("song-list");
    songList.innerHTML = "";

    songs.forEach(song => {
        const { id, name, primaryArtists, image } = song;
        const albumCover = image[1]?.url || image[0]?.url; 

        console.log("üé∂ Found Song:", name, "by", primaryArtists);

        const songItem = document.createElement("div");
        songItem.classList.add("song-item");

        songItem.innerHTML = `
            <img src="${albumCover}" alt="${name}">
            <p>${name} - ${primaryArtists}</p>
        `;

        songItem.onclick = () => fetchSongDetails(id, name, primaryArtists, albumCover);

        songList.appendChild(songItem);
    });
}

// üé∂ Fetch Song Details & Play Audio
async function fetchSongDetails(songId, title, artist, cover) {
    console.log("‚ñ∂Ô∏è Fetching song ID:", songId);

    try {
        const response = await fetch(`${JIOSAAVN_API_BASE}/songs?id=${songId}`);
        const data = await response.json();

        console.log("üéß Song Data:", data);

        if (data.status === "SUCCESS" && data.data.length > 0) {
            const songUrl = data.data[0]?.downloadUrl?.[2]?.link || data.data[0]?.downloadUrl?.[1]?.link;
            if (songUrl) {
                playAudio(songUrl, title, artist, cover);
            } else {
                alert("‚ùå No playable song found!");
            }
        } else {
            alert("‚ùå No song details found!");
        }
    } catch (error) {
        console.error("‚ö†Ô∏è Error fetching song:", error);
        alert("‚ö†Ô∏è Failed to fetch song details.");
    }
}

// ‚ñ∂Ô∏è Play Audio & Update Footer
function playAudio(url, title, artist, cover) {
    const audioPlayer = document.getElementById("music-player");
    const footerCover = document.getElementById("footer-cover-image");
    const footerTitle = document.getElementById("footer-song-title");
    const footerArtist = document.getElementById("footer-artist-name");
    const playPauseBtn = document.getElementById("footer-play-pause");

    console.log("üîä Playing URL:", url);

    currentSongUrl = url;
    isPlaying = true;

    audioPlayer.src = url;
    audioPlayer.play();

    // Update footer UI
    footerCover.src = cover;
    footerTitle.innerText = title;
    footerArtist.innerText = artist;
    playPauseBtn.innerText = "‚è∏";

    // Play/Pause Button Click Event
    playPauseBtn.onclick = () => {
        if (isPlaying) {
            audioPlayer.pause();
            playPauseBtn.innerText = "‚ñ∂Ô∏è";
        } else {
            audioPlayer.play();
            playPauseBtn.innerText = "‚è∏";
        }
        isPlaying = !isPlaying;
    };
}

// üéµ Event Listener for Search Button
document.querySelector("button").addEventListener("click", searchSongs);

    </script>
</body>
</html>
