<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music45 - JioSaavn Audio</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #1c1c1c; color: white; padding: 20px; }
        .search-container { margin-bottom: 20px; }
        input { padding: 10px; width: 60%; font-size: 16px; border-radius: 5px; border: 1px solid #444; }
        button { padding: 10px 15px; font-size: 16px; border: none; background: #ff4757; color: white; cursor: pointer; border-radius: 5px; }
        button:hover { background: #e84118; }
        .song-item { display: flex; align-items: center; margin: 10px auto; padding: 10px; background: #333; border-radius: 10px; width: 80%; cursor: pointer; }
        .song-item img { width: 80px; height: 80px; border-radius: 5px; margin-right: 10px; }
        .song-item p { flex-grow: 1; text-align: left; }
        .footer-controls {
            position: fixed;
            bottom: 0;
            width: 70%;
            background: #222;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            color: white;
        }
        .footer-song-info { display: flex; align-items: center; }
        .footer-cover { width: 50px; height: 50px; border-radius: 5px; margin-right: 10px; }
        .footer-controls-buttons button {
            background: none;
            border: none;
            font-size: 20px;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
   <input type="text" id="search-query" placeholder="Enter song name...">
<button>Search</button>
<div id="song-list"></div>

<audio id="music-player" controls></audio>

<div id="footer-controls" class="footer-controls">
  <div id="footer-song-info" class="footer-song-info">
    <img id="footer-cover-image" class="footer-cover" src="" alt="Cover">
    <div>
      <p id="footer-song-title">Select a Song</p>
      <p id="footer-artist-name"></p>
    </div>
  </div>
  <div class="footer-controls-buttons">
    <button id="footer-play-pause" class="footer-play-pause-btn">‚ñ∂Ô∏è</button>
  </div>
</div>



    <script>
const JIOSAAVN_API_BASE = "https://saavn.dev/api";
let currentSongUrl = null;
let isPlaying = false;

// üéµ Search Songs
async function searchSongs() {
    const query = document.getElementById("search-query").value.trim();
    if (!query) {
        alert("‚ùå Please enter a song name!");
        return;
    }

    console.log("üîé Searching for:", query); // Log search term

    try {
        const response = await fetch(`https://saavn.dev/api/search?query=${encodeURIComponent(query)}`);
        const data = await response.json();

        console.log("‚úÖ API Raw Response:", data); // Log full response

        if (data && data.status === "SUCCESS" && data.data && data.data.length > 0) {
            console.log("‚úÖ Songs found:", data.data);
            displaySongs(data.data); // Call function to show results
        } else {
            console.log("‚ùå No results from API!");
            alert("‚ùå No results found on JioSaavn!");
        }
    } catch (error) {
        console.error("‚ö†Ô∏è API Request Failed:", error);
        alert("‚ö†Ô∏è API request failed. Check console for errors.");
    }
}

// Function to display songs
function displaySongs(songs) {
    const songList = document.getElementById("song-list");
    songList.innerHTML = "";

    songs.forEach(song => {
        const { id, name, primaryArtists, image, downloadUrl } = song;

        // Some songs may not have a direct download link
        const songUrl = downloadUrl ? downloadUrl[4].url : null; 

        if (!songUrl) {
            console.warn("‚ö†Ô∏è Skipping song (No download URL):", name);
            return;
        }

        const songItem = document.createElement("div");
        songItem.classList.add("song-item");

        songItem.innerHTML = `
            <img src="${image[2].url}" alt="${name}">
            <p>${name} - ${primaryArtists}</p>
            <button onclick="playAudio('${songUrl}', '${name}', '${primaryArtists}', '${image[2].url}')">‚ñ∂ Play</button>
        `;

        songList.appendChild(songItem);
    });
}

// Function to play audio
function playAudio(songUrl, title, artist, cover) {
    const audioPlayer = document.getElementById("music-player");
    const footerCover = document.getElementById("footer-cover-image");
    const footerTitle = document.getElementById("footer-song-title");
    const footerArtist = document.getElementById("footer-artist-name");
    const playPauseBtn = document.getElementById("footer-play-pause");

    if (!songUrl) {
        alert("‚ùå No playable source found!");
        return;
    }

    audioPlayer.src = songUrl;
    audioPlayer.play();

    // Update footer UI
    footerCover.src = cover;
    footerTitle.innerText = title;
    footerArtist.innerText = artist;
    playPauseBtn.innerText = "‚è∏"; // Change to pause
}

// Play/Pause Button Click
document.getElementById("footer-play-pause").addEventListener("click", function () {
    const audioPlayer = document.getElementById("music-player");

    if (audioPlayer.paused) {
        audioPlayer.play();
        this.innerText = "‚è∏"; // Change to pause icon
    } else {
        audioPlayer.pause();
        this.innerText = "‚ñ∂"; // Change to play icon
    }
});

    </script>
</body>
</html>
